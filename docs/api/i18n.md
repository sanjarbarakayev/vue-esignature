# i18n Functions

Internationalization utilities for localized error messages.

## Import

```ts
import {
  setLocale,
  getLocale,
  getErrorMessage,
  getSupportedLocales,
  isLocaleSupported,
  detectAndSetBrowserLocale,
  i18n
} from '@eimzo/vue'

import type {
  SupportedLocale,
  ErrorMessageKey
} from '@eimzo/vue'
```

## Functions

### setLocale()

```ts
function setLocale(locale: SupportedLocale): void
```

Set the global locale for error messages.

**Parameters:**
- `locale` - Language code (`'en'`, `'ru'`, or `'uz'`)

**Throws:** Error if locale is not supported.

**Example:**
```ts
setLocale('uz') // Set Uzbek
setLocale('ru') // Set Russian
setLocale('en') // Set English
```

### getLocale()

```ts
function getLocale(): SupportedLocale
```

Get the current locale.

**Returns:** Current locale code.

**Example:**
```ts
const locale = getLocale() // 'en', 'ru', or 'uz'
```

### getErrorMessage()

```ts
function getErrorMessage(
  key: ErrorMessageKey,
  locale?: SupportedLocale
): string
```

Get a localized error message.

**Parameters:**
- `key` - Error message key
- `locale` - Optional locale override

**Returns:** Localized message string.

**Example:**
```ts
// Use current global locale
const msg1 = getErrorMessage('WRONG_PASSWORD')

// Force specific locale
const msg2 = getErrorMessage('WRONG_PASSWORD', 'ru')
```

### getSupportedLocales()

```ts
function getSupportedLocales(): SupportedLocale[]
```

Get list of supported locales.

**Returns:** `['en', 'ru', 'uz']`

### isLocaleSupported()

```ts
function isLocaleSupported(locale: string): locale is SupportedLocale
```

Check if a locale is supported.

**Example:**
```ts
if (isLocaleSupported('uz')) {
  setLocale('uz')
}

isLocaleSupported('fr') // false
```

### detectAndSetBrowserLocale()

```ts
function detectAndSetBrowserLocale(): SupportedLocale
```

Detect browser language and set if supported.

**Returns:** The detected/set locale.

**Example:**
```ts
// Automatically detect and set locale
const detectedLocale = detectAndSetBrowserLocale()
console.log('Using:', detectedLocale)
```

## i18n Object

All functions available through convenience object:

```ts
import { i18n } from '@eimzo/vue'

i18n.setLocale('ru')
i18n.getLocale()
i18n.getErrorMessage('WRONG_PASSWORD')
i18n.getSupportedLocales()
i18n.isLocaleSupported('en')
i18n.detectAndSetBrowserLocale()
```

## Types

### SupportedLocale

```ts
type SupportedLocale = 'en' | 'ru' | 'uz'
```

### ErrorMessageKey

```ts
type ErrorMessageKey =
  | 'ERIIMZO_NOT_INSTALLED'
  | 'ERIIMZO_CRYPTO_API_ERROR'
  | 'ERIIMZO_CERT_NOT_FOUND'
  | 'ERIIMZO_WRONG_PASSWORD'
  | 'ERIIMZO_NO_READER'
  | 'ERIIMZO_CARD_NOT_FOUND'
  | 'CAPIWS_CONNECTION'
  | 'BROWSER_WS'
  | 'UPDATE_APP'
  | 'WRONG_PASSWORD'
  | 'VERSION_UNDEFINED'
  | 'INSTALL_NEW_VERSION'
  | 'SIGNING_ERROR'
  | 'KEY_LOAD_ERROR'
  | 'CERTIFICATE_EXPIRED'
  | 'CERTIFICATE_NOT_YET_VALID'
```

## Error Messages

### English (en)

| Key | Message |
|-----|---------|
| `WRONG_PASSWORD` | Incorrect password. |
| `CAPIWS_CONNECTION` | Connection error with E-IMZO... |
| `UPDATE_APP` | WARNING! Please install the new version... |
| `BROWSER_WS` | Your browser does not support WebSocket... |

### Russian (ru)

| Key | Message |
|-----|---------|
| `WRONG_PASSWORD` | Пароль неверный. |
| `CAPIWS_CONNECTION` | Ошибка соединения с E-IMZO... |
| `UPDATE_APP` | ВНИМАНИЕ! Установите новую версию... |
| `BROWSER_WS` | Браузер не поддерживает технологию WebSocket... |

### Uzbek (uz)

| Key | Message |
|-----|---------|
| `WRONG_PASSWORD` | Parol noto'g'ri. |
| `CAPIWS_CONNECTION` | E-IMZO bilan bog'lanishda xatolik... |
| `UPDATE_APP` | DIQQAT! E-IMZO ilovasining yangi versiyasini... |
| `BROWSER_WS` | Brauzeringiz WebSocket texnologiyasini... |

## Complete Example

```vue
<script setup lang="ts">
import { ref, onMounted } from 'vue'
import {
  setLocale,
  getLocale,
  getErrorMessage,
  getSupportedLocales,
  detectAndSetBrowserLocale,
  type SupportedLocale
} from '@eimzo/vue'

const currentLocale = ref<SupportedLocale>(getLocale())
const errorDemo = ref('')

const localeLabels: Record<SupportedLocale, string> = {
  en: 'English',
  ru: 'Русский',
  uz: "O'zbek"
}

onMounted(() => {
  // Auto-detect browser locale
  detectAndSetBrowserLocale()
  currentLocale.value = getLocale()
  updateDemo()
})

function changeLocale(locale: SupportedLocale) {
  setLocale(locale)
  currentLocale.value = locale
  updateDemo()
}

function updateDemo() {
  errorDemo.value = getErrorMessage('WRONG_PASSWORD')
}
</script>

<template>
  <div class="i18n-demo">
    <h3>Language Settings</h3>

    <div class="locale-buttons">
      <button
        v-for="locale in getSupportedLocales()"
        :key="locale"
        @click="changeLocale(locale)"
        :class="{ active: locale === currentLocale }"
      >
        {{ localeLabels[locale] }}
      </button>
    </div>

    <div class="demo-message">
      <label>Error message example:</label>
      <p>{{ errorDemo }}</p>
    </div>
  </div>
</template>
```

## See Also

- [Internationalization Guide](/guide/i18n)
- [Error Handling Guide](/guide/error-handling)
